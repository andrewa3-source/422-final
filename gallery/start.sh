#!/bin/bash

tarball="
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
"
# Decode the tarball and extract it
mkdir gallery
echo "Restoring files to the 'gallery' directory..."
echo "$tarball" | base64 --decode | tar -xz -C gallery

echo "Files have been restored inside the 'gallery' directory."

# Update package list and install dependencies
sudo apt-get update
sudo apt-get install -yq python3-pip python3-venv


# Run the flask app under a venv
cd gallery
python3 -m venv gallery_venv
source gallery_venv/bin/activate
pip install --upgrade pip
pip install -r ./requirements.txt
export FLASK_APP="main.py"
export FLASK_RUN_PORT="80"
export FLASK_RUN_HOST="0.0.0.0"
flask run
